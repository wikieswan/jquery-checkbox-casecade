$.fn.casecade=function(){function a(a){var n,r=$(a).attr("name"),d=$(a).data("id"),c=$(a).data("parent"),i=a.checked,h=($('input[name="'+r+'"]'),$('input[name="'+r+'"][data-parent="-1"]')),p=($('input[name="'+r+'"][data-parent="0"]'),$('input[name="'+r+'"][data-id="'+c+'"]')),u=$('input[name="'+r+'"][data-parent="'+c+'"]'),f=$('input[name="'+r+'"][data-parent="'+d+'"]'),l=t(h,[]),g=0;if(0!==c)if(0===f.length){if(-1===c)return;for(var m,o=0,k=u.length;k>o;o++)m=u[o],m.checked?g++:"";p[0].checked=g===u.length,e(a)}else{n=t(a,[]);for(var m,o=0,k=n.length;k>o;o++)m=n[o],m.checked=i;e(a)}else for(var m,v,o=0,k=l.length;k>o;o++)m=l[o],v=$(m).data("id"),$eChildren=$('input[name="'+r+'"][data-parent="'+v+'"]'),0===$eChildren.length&&$(m).click()}function e(a){var t=$(a).attr("name"),n=($(a).data("id"),$(a).data("parent")),r=(a.checked,$('input[name="'+t+'"][data-id="'+n+'"]')),d=$('input[name="'+t+'"][data-parent="'+n+'"]'),c=0;if(-1!=n){a=r[0],e(a);for(var i,h=0,p=d.length;p>h;h++)i=d[h],i.checked?c++:"";r[0].checked=c===d.length}}function t(a,e){var n=$(a).attr("name"),r=$(a).data("id"),d=($(a).data("parent"),a.checked,$('input[name="'+n+'"][data-parent="'+r+'"]'));if(0===d.length)return e;for(var c,i,h=0,p=d.length;p>h;h++)i=d[h],a=i,e.push(a),c=t(a,e);return c}var n=$(this);n.off("change.casecade").on("change.casecade",":checkbox",function(e){var t=e.target?e.target:e.srcElement;a(t)})};